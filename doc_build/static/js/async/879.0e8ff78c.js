/*! For license information please see 879.0e8ff78c.js.LICENSE.txt */
(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["879"],{67049:function(n,e,i){"use strict";i.r(e);var t=i("11527"),a=i("50512");function r(n){let e=Object.assign({h1:"h1",a:"a",div:"div",p:"p",h2:"h2",pre:"pre",code:"code"},(0,a.useMDXComponents)(),n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{id:"app\u6253\u5F00\u624B\u673A\u901A\u77E5\u6743\u9650\u8BBE\u7F6E",children:["App\u6253\u5F00\u624B\u673A\u901A\u77E5\u6743\u9650\u8BBE\u7F6E",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#app\u6253\u5F00\u624B\u673A\u901A\u77E5\u6743\u9650\u8BBE\u7F6E",children:"#"})]}),"\n",(0,t.jsxs)(e.div,{className:"rspress-directive tip",children:[(0,t.jsx)(e.div,{className:"rspress-directive-title",children:"TIP"}),(0,t.jsxs)(e.div,{className:"rspress-directive-content",children:["\n",(0,t.jsx)(e.p,{children:"\u652F\u6301Android\u3001iOS"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.a,{href:"https://www.html5plus.org/doc/",target:"_blank",rel:"noopener noreferrer",children:"HTML5+"})," \u6269\u5C55\u89C4\u8303\uFF0C\u5728App\u73AF\u5883\u4E0B\u624D\u652F\u6301\u3002\u5982\u679C\u9879\u76EE\u6D89\u53CA\u5230\u5176\u4ED6\u5E73\u53F0\uFF0C\u6CE8\u610F\u8981\u4F7F\u7528\u6761\u4EF6\u7F16\u8F91"]}),"\n",(0,t.jsx)(e.p,{children:"Android\u53EF\u4EE5\u76F4\u63A5\u8DF3\u8F6C\u5230\u901A\u77E5\u8BBE\u7F6E\u9875\u9762"}),"\n",(0,t.jsx)(e.p,{children:"iOS\u56E0\u4E3A\u6743\u9650\u95EE\u9898\uFF0C\u53EA\u80FD\u8DF3\u8F6C\u5230App\u8BBE\u7F6E\uFF0C\u9700\u8981\u624B\u52A8\u70B9\u51FB\u8FDB\u5165\u901A\u77E5\u8BBE\u7F6E"}),"\n"]})]}),"\n",(0,t.jsxs)(e.h2,{id:"\u83B7\u53D6\u8BBE\u5907\u7CFB\u7EDF\u4FE1\u606F",children:["\u83B7\u53D6\u8BBE\u5907\u7CFB\u7EDF\u4FE1\u606F",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u83B7\u53D6\u8BBE\u5907\u7CFB\u7EDF\u4FE1\u606F",children:"#"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-jsx",children:"// const platform = uni.getSystemInfoSync().platform // uniapp api\nconst platform = plus.os.name // html5+ \u65B9\u6CD5\n"})}),"\n",(0,t.jsxs)(e.h2,{id:"\u68C0\u67E5\u901A\u77E5\u6743\u9650",children:["\u68C0\u67E5\u901A\u77E5\u6743\u9650",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u68C0\u67E5\u901A\u77E5\u6743\u9650",children:"#"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-jsx",children:"// \u5B9A\u4E49\u53D8\u91CF\uFF0C\u63D0\u4F9B\u7ED9\u65B9\u6CD5\u4F7F\u7528\nvar enabledTypes = 0\nfunction getNotificationStatus() {\n	if (platform == 'ios') {\n		var UIApplication = plus.ios.import('UIApplication')\n		var app = UIApplication.sharedApplication()\n		if (app.currentUserNotificationSettings) {\n			var settings = app.currentUserNotificationSettings()\n			enabledTypes = settings.plusGetAttribute('types')\n			console.log('enabledTypes1:' + enabledTypes)\n			//\u5982\u679CenabledTypes = 0 \u5C31\u662F\u901A\u77E5\u6743\u9650\u6CA1\u6709\u5F00\u542F\n			plus.ios.deleteObject(settings)\n			return enabledTypes\n		}\n	} else if (platform == 'android') {\n		//\u4E0B\u9762\u662F\u5B89\u5353\u7684\u65B9\u6CD5\n		var main = plus.android.runtimeMainActivity()\n		var pkName = main.getPackageName()\n		var uid = main.getApplicationInfo().plusGetAttribute('uid')\n		var NotificationManagerCompat = plus.android.importClass(\n			'android.support.v4.app.NotificationManagerCompat'\n		)\n		//android.support.v4\u5347\u7EA7\u4E3Aandroidx\n		if (NotificationManagerCompat == null) {\n			NotificationManagerCompat = plus.android.importClass(\n				'androidx.core.app.NotificationManagerCompat'\n			)\n		}\n		var areNotificationsEnabled = NotificationManagerCompat.from(main).areNotificationsEnabled()\n		console.log(areNotificationsEnabled)\n		return areNotificationsEnabled\n		// \u672A\u5F00\u901A\u2018\u5141\u8BB8\u901A\u77E5\u2019\u6743\u9650\uFF0C\u5219\u5F39\u7A97\u63D0\u9192\u5F00\u901A\uFF0C\u5E76\u70B9\u51FB\u786E\u8BA4\u540E\uFF0C\u8DF3\u8F6C\u5230\u7CFB\u7EDF\u8BBE\u7F6E\u9875\u9762\u8FDB\u884C\u8BBE\u7F6E\n	}\n}\n"})}),"\n",(0,t.jsxs)(e.h2,{id:"\u8DF3\u8F6C\u5E94\u7528\u8BBE\u7F6E",children:["\u8DF3\u8F6C\u5E94\u7528\u8BBE\u7F6E",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u8DF3\u8F6C\u5E94\u7528\u8BBE\u7F6E",children:"#"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-jsx",children:"function openNotificationSetting() {\n	//\u5F39\u7A97\u6309\u94AE\u7ED1\u5B9A\u65B9\u6CD5\n	if (platform == 'ios') {\n		//\u5982\u679C\u673A\u578B\u662Fios\uFF0Cios\u7531\u4E8E\u6743\u9650\u95EE\u9898\uFF0C\u53EF\u80FD\u9700\u8981\u624B\u52A8\u5F00\u542F\n		var UIApplication = plus.ios.import('UIApplication')\n		var app = UIApplication.sharedApplication()\n		var settings = app.currentUserNotificationSettings()\n		enabledTypes = settings.plusGetAttribute('types')\n		var NSURL2 = plus.ios.import('NSURL')\n		var setting2 = NSURL2.URLWithString('app-settings:')\n		var application2 = UIApplication.sharedApplication()\n		application2.openURL(setting2)\n		plus.ios.deleteObject(setting2)\n		plus.ios.deleteObject(NSURL2)\n		plus.ios.deleteObject(application2)\n		plus.ios.deleteObject(settings)\n	} else if (platform == 'android') {\n		//\u5982\u679C\u673A\u578B\u662F\u5B89\u5353\n		var main = plus.android.runtimeMainActivity()\n		var pkName = main.getPackageName()\n		var uid = main.getApplicationInfo().plusGetAttribute('uid')\n		var Intent = plus.android.importClass('android.content.Intent')\n		var Build = plus.android.importClass('android.os.Build')\n		//android 8.0\u5F15\u5BFC\n		if (Build.VERSION.SDK_INT >= 26) {\n			//\u5224\u65AD\u5B89\u5353\u7CFB\u7EDF\u7248\u672C\n			var intent = new Intent('android.settings.APP_NOTIFICATION_SETTINGS')\n			intent.putExtra('android.provider.extra.APP_PACKAGE', pkName)\n		} else if (Build.VERSION.SDK_INT >= 21) {\n			//\u5224\u65AD\u5B89\u5353\u7CFB\u7EDF\u7248\u672C\n			//android 5.0-7.0\n			var intent = new Intent('android.settings.APP_NOTIFICATION_SETTINGS')\n			intent.putExtra('app_package', pkName)\n			intent.putExtra('app_uid', uid)\n		} else {\n			//(<21)\u5176\u4ED6--\u8DF3\u8F6C\u5230\u8BE5\u5E94\u7528\u7BA1\u7406\u7684\u8BE6\u60C5\u9875\n			intent.setAction(Settings.ACTION_APPLICATION_DETAILS_SETTINGS)\n			var uri = Uri.fromParts('package', mainActivity.getPackageName(), null)\n			intent.setData(uri)\n		}\n		// \u8DF3\u8F6C\u5230\u8BE5\u5E94\u7528\u7684\u7CFB\u7EDF\u901A\u77E5\u8BBE\u7F6E\u9875\n		main.startActivity(intent)\n	}\n}\n"})})]})}function s(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,a.useMDXComponents)(),n.components);return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(r,{...n})}):r(n)}e.default=s,s.__RSPRESS_PAGE_META={},s.__RSPRESS_PAGE_META["web%2Funiapp%2F1.md"]={toc:[{text:"\u83B7\u53D6\u8BBE\u5907\u7CFB\u7EDF\u4FE1\u606F",id:"\u83B7\u53D6\u8BBE\u5907\u7CFB\u7EDF\u4FE1\u606F",depth:2},{text:"\u68C0\u67E5\u901A\u77E5\u6743\u9650",id:"\u68C0\u67E5\u901A\u77E5\u6743\u9650",depth:2},{text:"\u8DF3\u8F6C\u5E94\u7528\u8BBE\u7F6E",id:"\u8DF3\u8F6C\u5E94\u7528\u8BBE\u7F6E",depth:2}],title:"App\u6253\u5F00\u624B\u673A\u901A\u77E5\u6743\u9650\u8BBE\u7F6E",frontmatter:{}}}}]);